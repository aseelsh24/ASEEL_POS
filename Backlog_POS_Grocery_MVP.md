# Backlog — نظام نقطة بيع وإدارة مخزون لمحل بقالة صغير (MVP)

هذا الـ Backlog مشتق من وثيقة الـ PRD (MVP) ويستهدف تشغيل نظام عملي على **جهاز واحد** مع **عمل كامل دون إنترنت**.

---

## مبادئ تنظيم الـ MVP

- الأولوية للميزات التي تقلل الأخطاء وتسرّع البيع.
- أي ميزة لا تؤثر مباشرة على البيع/المخزون تُرحّل لإصدارات لاحقة.
- الحفاظ على سلامة البيانات التاريخية (Soft delete، سجل حركة).

---

## EPIC 0 — الأساسيات والبنية (Foundation)

**الهدف:** تجهيز تطبيق مستقر يدعم RTL وتخزين محلي وإعدادات أول تشغيل.

- **US-0.1** تهيئة مشروع React + TS + Vite مع دعم RTL.
- **US-0.2** تنفيذ طبقة تخزين محلي (IndexedDB أو SQLite عبر غلاف).
- **US-0.3** شاشة إعداد أول تشغيل (اسم المتجر، العملة، التقريب).

---

## EPIC 1 — المستخدمون والدخول (Auth Lite)

**الهدف:** حماية الحد الأدنى مع تجربة بسيطة.

- **US-1.1** تسجيل دخول محلي بسيط.
- **US-1.2** قفل تلقائي بعد الخمول (افتراضي 5 دقائق).

> ملاحظة: يمكن الاكتفاء بمستخدم واحد (المدير) في MVP.

---

## EPIC 2 — إدارة الأصناف والتصنيفات (Catalog)

**الهدف:** بناء قاعدة منتجات سليمة ومُنظمة للبيع.

- **US-2.1** إضافة صنف.
- **US-2.2** تعديل صنف.
- **US-2.3** تعطيل صنف (Soft delete).
- **US-2.4** إدارة التصنيفات.
- **US-2.5** استيراد/تصدير الأصناف CSV (خفيف).

---

## EPIC 3 — شاشة نقطة البيع (POS Core)

**الهدف:** أسرع تدفق بيع ممكن مع ضبط المخزون.

- **US-3.1** واجهة بيع سريعة مع سلة واضحة.
- **US-3.2** إضافة للصندوق بالباركود.
- **US-3.3** البحث بالاسم.
- **US-3.4** منع بيع كمية أكبر من المتوفر مع تجاوز بإذن المدير.
- **US-3.5** الخصومات (على صنف أو فاتورة).
- **US-3.6** الدفع النقدي وحفظ الفاتورة.
- **US-3.7** البيع الآجل (اختياري داخل MVP أو يُرحّل إلى 1.1).

---

## EPIC 4 — المشتريات (Purchases)

**الهدف:** إدخال توريد يرفع المخزون بطريقة صحيحة.

- **US-4.1** إنشاء فاتورة مشتريات.
- **US-4.2** تحديث المخزون تلقائياً بعد حفظ المشتريات.
- **US-4.3** إدخال مورد كنص حر في MVP.

---

## EPIC 5 — المرتجعات والتسويات (Returns & Adjustments)

**الهدف:** تصحيح البيع والمخزون بأقل تعقيد.

- **US-5.1** مرتجع مبيعات مرتبط بفاتورة أصلية.
- **US-5.2** إعادة للمخزون تلقائياً عند المرتجع.
- **US-5.3** تسوية مخزون يدوية مع سبب إلزامي.

---

## EPIC 6 — سجل حركة المخزون (Ledger)

**الهدف:** قابلية تدقيق كاملة لكل تغيير بالمخزون.

- **US-6.1** توليد سجل حركة تلقائي لكل العمليات.
- **US-6.2** شاشة عرض حركة صنف مع فلترة.

---

## EPIC 7 — التقارير الأساسية (Reports MVP)

**الهدف:** رؤية يومية سريعة للأداء.

- **US-7.1** تقرير مبيعات اليوم.
- **US-7.2** أفضل 10 أصناف.
- **US-7.3** تنبيهات الحد الأدنى.
- **US-7.4** ربح تقديري وفق Last Purchase Cost.

---

## EPIC 8 — النسخ الاحتياطي والتصدير (Backup & Export)

**الهدف:** حماية البيانات وفتح الباب لـ Excel.

- **US-8.1** نسخ احتياطي يدوي.
- **US-8.2** نسخ احتياطي تلقائي يومي + احتفاظ بآخر 7 نسخ.
- **US-8.3** تصدير تقارير CSV.

---

## EPIC 9 — الطباعة والأجهزة (Hardware)

**الهدف:** دعم طباعة فواتير بحد أدنى من الإعدادات.

- **US-9.1** إعداد طابعة ESC/POS واختبار طباعة.
- **US-9.2** طباعة تلقائية بعد البيع (خيار تشغيل/إيقاف).

---

## ترتيب تنفيذ مقترح (Sprint-friendly)

### Sprint 1
- EPIC 0
- EPIC 2 (US-2.1, US-2.2)
- EPIC 3 (US-3.1, US-3.2, US-3.3)

### Sprint 2
- EPIC 3 (US-3.4, US-3.5, US-3.6)
- EPIC 6 (US-6.1)

### Sprint 3
- EPIC 4
- EPIC 5

### Sprint 4
- EPIC 7
- EPIC 8
- EPIC 9

---

## تعريف نجاح MVP تشغيلياً

يُعتبر النظام جاهزاً للاستخدام الفعلي عند توفر:

- إدارة أصناف مع باركود وحد تنبيه.
- بيع كامل سريع مع خصم بسيط.
- خصم المخزون تلقائياً + سجل حركة.
- مشتريات ترفع المخزون.
- مرتجع مبيعات أساسي.
- تقارير اليوم وتنبيهات مخزون.
- نسخة احتياطية يدوية.
- طباعة عند توفر الأجهزة.

